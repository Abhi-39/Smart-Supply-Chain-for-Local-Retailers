/* ============================
   THEME VARIABLES (light + dark)
   ============================ */
:root {
  --transition-speed: 0.25s;

  /* Dark theme default */
  --bg: #121212;
  --bg-2: #0f0f10;
  --panel: #1e1e1f;
  --muted: #bdbdbd;
  --text: #f5f5f5;
  --accent: #6ee7b7;
  --accent-2: #7dd3fc;
  --danger: #fb7185;
  --glass: rgba(255,255,255,0.03);
  --card-shadow: 0 6px 18px rgba(0,0,0,0.55);
  --radius: 10px;
  --gap: 14px;
  --max-width: 1100px;

  /* backdrop opacity (adjusts strength of page dimming) */
  --backdrop-opacity: 0.55;
  --page-vignette: rgba(0,0,0,var(--backdrop-opacity));
}

[data-theme="light"] {
  --bg: #f5f7fa;
  --bg-2: #ececec;
  --panel: #ffffff;
  --muted: #6c6c6c;
  --text: #1a1a1a;
  --accent: #34c759;
  --accent-2: #0a84ff;
  --danger: #ff3b30;
  --glass: rgba(0,0,0,0.04);
  --card-shadow: 0 6px 16px rgba(0,0,0,0.08);

  /* slightly less strong overlay in light mode */
  --backdrop-opacity: 0.45;
  --page-vignette: rgba(255,255,255,var(--backdrop-opacity));
}

/* Smooth theme transitions */
body, .panel, .kpi-card, table.products, .toast, .modal {
  transition: background var(--transition-speed),
              color var(--transition-speed),
              border var(--transition-speed),
              box-shadow var(--transition-speed);
}

/* ============================
   PAGE BACKGROUND (no banding)
   ============================ */
html {
  background: linear-gradient(180deg, var(--bg), var(--bg-2));
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-size: cover;
  min-height: 100vh;
}

body {
  margin: 0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: transparent; /* html gradient shows through */
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding: 28px;
  min-height: 100vh;
  box-sizing: border-box;
}

/* App container */
.app-wrap { max-width: var(--max-width); margin: 0 auto; }

/* Header */
.header { display:flex; align-items:center; gap:20px; margin-bottom: 22px; }
.brand { display:flex; flex-direction:column; }
.brand h1 { margin:0; font-size:44px; letter-spacing:-0.6px; line-height:1; color:var(--text); text-shadow: 0 2px 0 rgba(0,0,0,0.6); }
.nav { margin-top:8px; display:flex; gap:14px; align-items:center; }
.nav a { color:var(--accent-2); text-decoration:none; font-size:14px; }
.header-actions { margin-left:auto; }

/* Panel */
.panel {
  position: relative; /* ensure it creates its own stacking context below modal */
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:18px;
  border-radius:var(--radius);
  box-shadow: var(--card-shadow);
  border: 1px solid rgba(0,0,0,0.04);
  overflow: visible;
  z-index: 1; /* intentionally low so modal sits above */
}

/* Top bar inside panel */
.panel-top{ display:flex; align-items:center; justify-content:space-between; margin-bottom:14px; }
.panel-top h2{ margin:0; font-size:20px; color:var(--text) }

/* Table / list */
.table-wrap{ overflow:auto; border-radius:8px; }
table.products{ width:100%; border-collapse:collapse; min-width:640px; }
.products th, .products td {
  text-align:left;
  padding:14px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.04);
  color:var(--muted);
  font-size:14px;
}
.products th {
  text-transform:uppercase;
  font-size:12px;
  letter-spacing:0.6px;
  color:rgba(255,255,255,0.7);
}
.products tbody tr:hover {
  background: rgba(255,255,255,0.02);
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
  z-index: 2; /* keep rows above normal content but below modal (modal uses much higher z-index) */
}
.cell-title { font-weight:600; color:var(--text); }
.cell-sub { color:var(--muted); font-size:13px; }

/* Buttons */
.btn{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:8px; border:none; cursor:pointer; background:var(--glass); color:var(--text); box-shadow: 0 3px 8px rgba(0,0,0,0.5); transition: transform .12s ease; }
.btn:hover{ transform: translateY(-2px) }
.btn.primary { background: linear-gradient(90deg,var(--accent), var(--accent-2)); color:#022; font-weight:700; }
.btn.ghost{ background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); }

/* small icon button */
.icon-btn{ padding:6px 10px; border-radius:8px; background:rgba(255,255,255,0.02); }

/* responsive cards fallback (hidden on desktop) */
@media (max-width:820px){
  .products{ display:none } /* hide table on small screens */
  .cards{ display:block }
}
.cards{ display:none; gap:12px }

/* Form */
.form-row{ display:flex; gap:12px; margin-bottom:10px }
.form-row .field{ flex:1 }
input[type="text"], input[type="number"], select, textarea{
  width:100%;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.06);
  background: rgba(0,0,0,0.12);
  color:var(--text);
  outline: none;
  box-sizing: border-box;
}
input:focus, textarea:focus, select:focus{
  box-shadow: 0 6px 20px rgba(0,0,0,0.5);
  border-color: rgba(255,255,255,0.12);
}

/* KPI / cards */
.kpi-row { display:flex; gap:18px; margin-bottom:18px; align-items:stretch; }
.kpi-card { flex:1; min-width:160px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03); box-shadow: 0 10px 24px rgba(0,0,0,0.45); }
.kpi-title { font-size:12px; color:var(--muted); text-transform:uppercase; letter-spacing:1px; }
.kpi-value { font-size:22px; font-weight:700; margin-top:6px; color:var(--text); }
.kpi-sub { font-size:13px; color:var(--muted); margin-top:6px; }
.kpi-chart { width:220px; height:120px; display:flex; align-items:center; justify-content:center; }

/* Avatar */
.avatar { width:44px; height:44px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.5); border:1px solid rgba(255,255,255,0.03); font-size:14px; }

/* ============================
   MODAL / BACKDROP (final, robust)
   ============================ */

/* Keyframes for entrance */
@keyframes modal-pop {
  0%   { transform: translateY(-12px) scale(0.98); opacity:0; }
  60%  { transform: translateY(4px) scale(1.02); opacity:1; }
  100% { transform: translateY(0) scale(1); opacity:1; }
}
@keyframes backdrop-fade-in {
  from { opacity: 0; } to { opacity: 1; }
}

/* Backdrop: fixed, covers whole viewport, strong enough to hide busy backgrounds */
.modal-backdrop {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999; /* very high so it's above all page content / stacking contexts */

  /* Use the theme-controlled vignette color; fallback to semi-opaque dark */
  background-color: var(--page-vignette, rgba(0,0,0,0.55));
  /* subtle blur makes the background feel distant */
  backdrop-filter: blur(6px) saturate(1.05);
  -webkit-backdrop-filter: blur(6px) saturate(1.05);

  pointer-events: auto; /* block clicks to underlying UI */
  animation: backdrop-fade-in 200ms cubic-bezier(.2,.9,.2,1) both;
}

/* Modal dialog: opaque surface, constrained, scrolls internally if content is tall */
.modal {
  position: relative;
  width: min(720px, calc(100% - 48px)); /* cap width and provide side margin on small screens */
  max-width: 720px;
  max-height: 80vh;            /* prevents modal from pushing page height */
  overflow: auto;             /* internal scrolling when content exceeds viewport */
  background: var(--panel);   /* opaque panel color - no transparency */
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 24px 60px rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.04);
  z-index: 10000;             /* above the backdrop */
  animation: modal-pop 260ms cubic-bezier(.2,.9,.2,1) both;
  box-sizing: border-box;
  -webkit-overflow-scrolling: touch;
}

/* Make sure images / charts / large children inside modal can't overflow horizontally */
.modal img,
.modal svg,
.modal canvas,
.modal .kpi-chart {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Constrain large chart area so it shows inside modal properly */
.modal .kpi-chart {
  width: 320px;
  max-width: 100%;
  height: 160px;
  margin: 0 auto;
}

/* Light-mode modal tweaks */
[data-theme="light"] .modal {
  box-shadow: 0 12px 36px rgba(0,0,0,0.10);
  border: 1px solid rgba(0,0,0,0.06);
}

/* Respect reduced-motion preference */
@media (prefers-reduced-motion: reduce) {
  .modal-backdrop,
  .modal {
    animation: none !important;
    transition: none !important;
  }
}

/* Optional CSS class to use if you want exit animation (JS should add 'closing' class before removing) */
.modal.closing { animation-direction: reverse; }
.modal-backdrop.closing { animation-direction: reverse; }

/* Toasts (kept above everything except modal) */
.toast-wrap { position: fixed; right: 20px; bottom: 20px; display:flex; flex-direction:column; gap:12px; z-index: 11000; }
.toast { background: rgba(0,0,0,0.75); padding:12px 18px; border-radius:10px; color:var(--text); box-shadow: 0 4px 14px rgba(0,0,0,0.5); }

/* ============================
   accessibility / helpers
   ============================ */
[role="dialog"] { outline: none; }

/* small screens */
@media (max-width: 640px) {
  .brand h1 { font-size: 32px; }
  .modal { width: calc(100% - 28px); max-height: 86vh; padding: 16px; }
  .kpi-chart { width: 200px; height: 120px; }
}

/* final minor tweaks: ensure panel content never floats above modal due to transforms
   (for safety, reduce transform-created stacking contexts' z-index) */
.kpi-card, .products tbody tr {
  z-index: 2;
}

/* end of file */
